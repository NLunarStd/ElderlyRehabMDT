<!DOCTYPE html>
<html>
<head>
<style>
    body {
        margin: 0;
        font-size: 28px;
        font-family: Arial, Helvetica, sans-serif;
    }

    .header {
        background-color: #f1f1f1;
        padding: 30px;
        text-align: center;
    }

    #navbar {
        position: sticky;
        top: 0;
        overflow: hidden;
        background-color: #333;
    }

    #navbar a {
        float: left;
        display: block;
        color: #f2f2f2;
        text-align: center;
        padding: 14px 16px;
        text-decoration: none;
        font-size: 17px;
    }

    #navbar a:hover {
        background-color: #ddd;
        color: black;
    }

    #navbar a.active {
        background-color: #04AA6D;
        color: white;
    }

    .content {
        padding: 16px;
    }
    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
    }
    th, td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left;
    }
    th {
        background-color: #f2f2f2;
    }
</style>
</head>
<body>

    <div class="header">
        <h2>Elderly Rehab</h2>
        <p>Web for check patient information.</p>
    </div>

    <div id="navbar">
        <a class="active" href="javascript:void(0)"><i class="home.png">Home</i></a>
        <a href="javascript:void(0)">Search</a>
        <a href="javascript:void(0)">Contact</a>
    </div>

    <h1>Enter HN number</h1>

    <label for="inputHN">Enter HN number:</label>
    <input type="number" id="inputHN" placeholder="etc 12345">
    <button onclick="fetchData()">Read</button>

    <h2>Result:</h2>
    <div id="output">
    </div>

    <script>
function fetchData() {
  const inputHN = document.getElementById('inputHN').value; // Changed ID to inputHN
  const outputDiv = document.getElementById('output');
  outputDiv.innerHTML = 'กำลังโหลดข้อมูล...';

  if (!inputHN) {
    outputDiv.innerHTML = 'กรุณากรอกตัวเลข HN ก่อน';
    return;
  }

  const webAppUrl = 'https://script.google.com/macros/s/AKfycby_0yoWBvPtjixBtzgqCHzmvAFnnZn-8bQtF-gbGw4FQTXaEfhfTPmtcQsaS-_Gpe2ZkQ/exec';
  
  fetch(`${webAppUrl}?hn=${inputHN}`) // Changed 'number' to 'hn'
    .then(response => {
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        return response.json();
    })
    .then(data => {
      if (data.error) {
        outputDiv.innerHTML = `เกิดข้อผิดพลาด: ${data.error}`;
      } else if (data.found) {
        let htmlContent = '<table>';
        htmlContent += '<tr><th>Hospital ID</th><th>Birth Date</th><th>Age</th><th>Gender</th></tr>';
        htmlContent += `<tr>
                            <td>${data.HospitalIDs}</td>
                            <td>${data.BirthDate}</td>
                            <td>${data.Age}</td>
                            <td>${data.Gender}</td>
                        </tr>`;
        htmlContent += '</table>';
        outputDiv.innerHTML = htmlContent;
      } else {
        outputDiv.innerHTML = data.message; // Display "ไม่พบข้อมูลสำหรับ HN: [HN]"
      }
    })
    .catch(error => {
      outputDiv.innerHTML = `เกิดข้อผิดพลาดในการเชื่อมต่อ: ${error.message}`;
      console.error('Error:', error);
    });
}
    </script>
</body>
</html>
